#!/usr/bin/env python3
"""
æ¨ªæµœãƒ»éŒå€‰ã‚¨ãƒªã‚¢ã®å„ãƒ«ãƒ¼ãƒˆã«ã‚µãƒ³ãƒ—ãƒ«Pinã‚’è¿½åŠ 
"""
import os
from supabase import create_client
from dotenv import load_dotenv

load_dotenv('/home/user/wanmap_v2/.env')
supabase = create_client(os.getenv('SUPABASE_URL'), os.getenv('SUPABASE_SERVICE_ROLE_KEY'))
TEST_USER = 'e09b6a6b-fb41-44ff-853e-7cc437836c77'

# ã‚¨ãƒªã‚¢ã”ã¨ã®Pin
pins = {
    'a2222222-2222-2222-2222-222222222222': [  # æ¨ªæµœ
        {'route': 'ã¿ãªã¨ã¿ã‚‰ã„æµ·å²¸ç·šã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'ãƒ©ãƒ³ãƒ‰ãƒãƒ¼ã‚¯ã‚¿ãƒ¯ãƒ¼ã¨æ„›çŠ¬', 'comment': 'æ¨ªæµœã®ã‚·ãƒ³ãƒœãƒ«ã‚’ãƒãƒƒã‚¯ã«æ’®å½±ã€‚çµ¶æ™¯ã§ã™ï¼', 'lat': 35.4537, 'lon': 139.6380},
            {'type': 'shop', 'title': 'ãƒšãƒƒãƒˆåŒä¼´OKã®ã‚«ãƒ•ã‚§', 'comment': 'æµ·ãŒè¦‹ãˆã‚‹ãƒ†ãƒ©ã‚¹å¸­ã§ä¼‘æ†©ã€‚æœ€é«˜ã§ã—ãŸã€‚', 'lat': 35.4545, 'lon': 139.6390},
            {'type': 'encounter', 'title': 'ãƒ€ãƒƒã‚¯ã‚¹ãƒ•ãƒ³ãƒ‰ã¨é­é‡', 'comment': 'å¯æ„›ã„ãƒ€ãƒƒã‚¯ã‚¹ã¡ã‚ƒã‚“ã¨ä»²è‰¯ããªã‚Šã¾ã—ãŸã€‚', 'lat': 35.4530, 'lon': 139.6370},
        ]},
        {'route': 'å±±ä¸‹å…¬åœ’ã€œä¸­è¯è¡—ã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'æ°·å·ä¸¸ã¨æ„›çŠ¬', 'comment': 'æ­´å²çš„ãªèˆ¹ã‚’ãƒãƒƒã‚¯ã«è¨˜å¿µæ’®å½±ã§ãã¾ã™ã€‚', 'lat': 35.4437, 'lon': 139.6500},
            {'type': 'shop', 'title': 'ä¸­è¯è¡—ã®ãƒ†ãƒ©ã‚¹å¸­', 'comment': 'ãƒšãƒƒãƒˆåŒä¼´ã§ä¸­è¯æ–™ç†ã‚’æ¥½ã—ã‚ã¾ã—ãŸã€‚', 'lat': 35.4445, 'lon': 139.6510},
            {'type': 'encounter', 'title': 'ãƒãƒ¡ãƒ©ãƒ‹ã‚¢ãƒ³ã¨é­é‡', 'comment': 'å…ƒæ°—ã„ã£ã±ã„ã®ãƒãƒ¡ã¡ã‚ƒã‚“ã€‚å¯æ„›ã‹ã£ãŸã§ã™ã€‚', 'lat': 35.4430, 'lon': 139.6490},
        ]},
        {'route': 'ä¸‰æºªåœ’å‘¨éŠã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'æ—¥æœ¬åº­åœ’ã®ç¾', 'comment': 'å››å­£æŠ˜ã€…ã®èŠ±ãŒç¾ã—ã„ã€‚ç™’ã•ã‚Œã¾ã™ã€‚', 'lat': 35.4200, 'lon': 139.6450},
            {'type': 'other', 'title': 'æ­´å²çš„å»ºé€ ç‰©', 'comment': 'å¤ã„å»ºç‰©ã‚’è¦‹ãªãŒã‚‰æ•£æ­©ã€‚é¢¨æƒ…ãŒã‚ã‚Šã¾ã™ã€‚', 'lat': 35.4205, 'lon': 139.6455},
        ]},
        {'route': 'ã“ã©ã‚‚ã®å›½ã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'åºƒå¤§ãªèŠç”Ÿåºƒå ´', 'comment': 'æ„›çŠ¬ãŒæ€ã„åˆ‡ã‚Šèµ°ã‚Œã‚‹é–‹æ”¾çš„ãªç©ºé–“ã§ã™ã€‚', 'lat': 35.5350, 'lon': 139.4850},
            {'type': 'encounter', 'title': 'ãƒ©ãƒ–ãƒ©ãƒ‰ãƒ¼ãƒ«ã¨éŠã¶', 'comment': 'å¤§å‹çŠ¬åŒå£«ã§æ¥½ã—ãéŠã³ã¾ã—ãŸã€‚', 'lat': 35.5355, 'lon': 139.4855},
            {'type': 'other', 'title': 'ãƒ”ã‚¯ãƒ‹ãƒƒã‚¯ã‚¨ãƒªã‚¢', 'comment': 'ãŠå¼å½“ã‚’é£Ÿã¹ãªãŒã‚‰æ„›çŠ¬ã¨ã®ã‚“ã³ã‚Šã€‚', 'lat': 35.5345, 'lon': 139.4845},
        ]},
    ],
    'a3333333-3333-3333-3333-333333333333': [  # éŒå€‰
        {'route': 'éŒå€‰å¤§ä»å‘¨è¾ºã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'å¤§ä»ã¨æ„›çŠ¬', 'comment': 'éŒå€‰ã®ã‚·ãƒ³ãƒœãƒ«ã¨è¨˜å¿µæ’®å½±ã€‚æœ€é«˜ã®æ€ã„å‡ºã§ã™ã€‚', 'lat': 35.3167, 'lon': 139.5365},
            {'type': 'shop', 'title': 'ãƒšãƒƒãƒˆåŒä¼´OKã®èŒ¶å±‹', 'comment': 'æŠ¹èŒ¶ã‚’é£²ã¿ãªãŒã‚‰ä¼‘æ†©ã€‚å’Œã®é›°å›²æ°—ãŒç´ æ•µã€‚', 'lat': 35.3170, 'lon': 139.5370},
            {'type': 'encounter', 'title': 'ç§‹ç”°çŠ¬ã¨é­é‡', 'comment': 'å¤§ããã¦å„ªã—ã„ç§‹ç”°çŠ¬ã€‚è§¦ã‚‰ã›ã¦ã‚‚ã‚‰ã„ã¾ã—ãŸã€‚', 'lat': 35.3165, 'lon': 139.5360},
        ]},
        {'route': 'ææœ¨åº§æµ·å²¸ã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'æµ·å²¸ç·šã®å¤•ç„¼ã‘', 'comment': 'å¤•æš®ã‚Œæ™‚ã®æµ·ãŒç¾ã—ã„ã€‚å¯Œå£«å±±ã‚‚è¦‹ãˆã¾ã—ãŸã€‚', 'lat': 35.3080, 'lon': 139.5650},
            {'type': 'encounter', 'title': 'ãƒ“ãƒ¼ã‚°ãƒ«ã¨éŠã¶', 'comment': 'ç ‚æµœã§æ„›çŠ¬åŒå£«ãŒæ¥½ã—ãéŠã³ã¾ã—ãŸã€‚', 'lat': 35.3085, 'lon': 139.5655},
            {'type': 'shop', 'title': 'æµ·æ²¿ã„ã®ã‚«ãƒ•ã‚§', 'comment': 'ãƒ†ãƒ©ã‚¹å¸­ã§æµ·ã‚’è¦‹ãªãŒã‚‰ãƒ©ãƒ³ãƒã€‚æœ€é«˜ã§ã—ãŸã€‚', 'lat': 35.3075, 'lon': 139.5645},
        ]},
        {'route': 'é¶´å²¡å…«å¹¡å®®ã€œè‹¥å®®å¤§è·¯ã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'æ¡œä¸¦æœ¨ã®å‚é“', 'comment': 'æ˜¥ã¯æ¡œãŒç¶ºéº—ã€‚æ„›çŠ¬ã¨æ•£æ­©ã™ã‚‹ã®ãŒæ¥½ã—ã„ã§ã™ã€‚', 'lat': 35.3260, 'lon': 139.5550},
            {'type': 'shop', 'title': 'å°ç”ºé€šã‚Šã®ãŠåº—', 'comment': 'ãƒšãƒƒãƒˆåŒä¼´OKã®ãŠåº—ãŒå¤šãã¦ä¾¿åˆ©ã€‚', 'lat': 35.3265, 'lon': 139.5555},
            {'type': 'other', 'title': 'é¶´å²¡å…«å¹¡å®®', 'comment': 'æ„›çŠ¬ã¨ä¸€ç·’ã«å‚æ‹ã§ãã¾ã™ã€‚ç¸èµ·ãŒè‰¯ã„ã€‚', 'lat': 35.3255, 'lon': 139.5545},
        ]},
        {'route': 'åŒ—éŒå€‰å¯ºç¤¾ã‚ãã‚Šã‚³ãƒ¼ã‚¹', 'pins': [
            {'type': 'scenery', 'title': 'ç´…è‘‰ã®å¯ºé™¢', 'comment': 'ç§‹ã®ç´…è‘‰ãŒç¾ã—ã„ã€‚å†™çœŸæ˜ ãˆã—ã¾ã™ã€‚', 'lat': 35.3370, 'lon': 139.5470},
            {'type': 'other', 'title': 'é™ã‹ãªå±±é“', 'comment': 'è‡ªç„¶è±Šã‹ã§ç™’ã•ã‚Œã¾ã™ã€‚æ„›çŠ¬ã‚‚å–œã‚“ã§ã„ã¾ã—ãŸã€‚', 'lat': 35.3375, 'lon': 139.5475},
            {'type': 'encounter', 'title': 'ã‚·ã‚§ãƒ«ãƒ†ã‚£ã¨é­é‡', 'comment': 'è³¢ãã¦å¯æ„›ã„ã‚·ã‚§ãƒ«ãƒ†ã‚£ã¡ã‚ƒã‚“ã€‚ä»²è‰¯ããªã‚Šã¾ã—ãŸã€‚', 'lat': 35.3365, 'lon': 139.5465},
        ]},
    ],
}

total = 0
for area_id, routes in pins.items():
    area_name = 'æ¨ªæµœ' if '2222' in area_id else 'éŒå€‰'
    print(f"\n{'='*60}\n{area_name}ã‚¨ãƒªã‚¢ã®Pinè¿½åŠ \n{'='*60}")
    
    for route_data in routes:
        res = supabase.table('official_routes').select('id').eq('area_id', area_id).eq('name', route_data['route']).single().execute()
        route_id = res.data['id']
        
        print(f"\nğŸ—ºï¸  {route_data['route']} ({len(route_data['pins'])}å€‹)")
        for idx, p in enumerate(route_data['pins'], 1):
            supabase.table('route_pins').insert({
                'route_id': route_id,
                'user_id': TEST_USER,
                'location': f"SRID=4326;POINT({p['lon']} {p['lat']})",
                'pin_type': p['type'],
                'title': p['title'],
                'comment': p['comment'],
            }).execute()
            print(f"  âœ… [{idx}/{len(route_data['pins'])}] {p['title']}")
            total += 1

print(f"\n{'='*60}\nğŸ“Š åˆè¨ˆ: {total}å€‹ã®Pinã‚’è¿½åŠ ã—ã¾ã—ãŸ\n{'='*60}\nğŸ‰ å®Œäº†ï¼")
