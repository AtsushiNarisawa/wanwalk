# WanMap - æ„›çŠ¬ã®æ•£æ­©ãƒ«ãƒ¼ãƒˆå…±æœ‰ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒª

<div align="center">
  <img src="assets/icon/app_icon.png" width="120" alt="WanMap Icon">
  
  [![Flutter](https://img.shields.io/badge/Flutter-3.38.2-blue.svg)](https://flutter.dev)
  [![Dart](https://img.shields.io/badge/Dart-3.0+-blue.svg)](https://dart.dev)
  [![Supabase](https://img.shields.io/badge/Supabase-PostgreSQL-green.svg)](https://supabase.com)
  [![Riverpod](https://img.shields.io/badge/Riverpod-2.6.1-purple.svg)](https://riverpod.dev)
</div>

## ğŸ“± ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

WanMapã¯ã€æ„›çŠ¬ã¨ã®æ•£æ­©ã‚’è¨˜éŒ²ãƒ»å…±æœ‰ã§ãã‚‹ãƒ¢ãƒã‚¤ãƒ«ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã™ã€‚2025å¹´1æœˆã«ãƒªãƒ‹ãƒ¥ãƒ¼ã‚¢ãƒ«ã‚’å®Ÿæ–½ã—ã€2ãƒ¢ãƒ¼ãƒ‰åˆ¶ï¼ˆDaily/Outingï¼‰ã¨å…¬å¼ãƒ«ãƒ¼ãƒˆãƒ»ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£æ©Ÿèƒ½ã‚’å°å…¥ã—ã¾ã—ãŸã€‚

### ğŸ¯ ä¸»ãªæ©Ÿèƒ½

#### 1. **2ãƒ¢ãƒ¼ãƒ‰åˆ¶æ•£æ­©è¨˜éŒ²**
- **Dailyï¼ˆæ—¥å¸¸ã®æ•£æ­©ï¼‰**: ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨˜éŒ²ã¨ã—ã¦ä¿å­˜
- **Outingï¼ˆãŠã§ã‹ã‘æ•£æ­©ï¼‰**: å…¬å¼ãƒ«ãƒ¼ãƒˆã‚’æ­©ã„ã¦ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£ã«å‚åŠ 

#### 2. **å…¬å¼ãƒ«ãƒ¼ãƒˆã‚·ã‚¹ãƒ†ãƒ **
- ç®¡ç†è€…ãŒç™»éŒ²ã—ãŸæ¨å¥¨ãƒ«ãƒ¼ãƒˆ
- ã‚¨ãƒªã‚¢åˆ¥ã«ãƒ«ãƒ¼ãƒˆã‚’æ¢ç´¢ï¼ˆç®±æ ¹ã€æ¨ªæµœã€éŒå€‰ç­‰ï¼‰
- é›£æ˜“åº¦åˆ¥ï¼ˆåˆç´šãƒ»ä¸­ç´šãƒ»ä¸Šç´šï¼‰
- è·é›¢ãƒ»æ‰€è¦æ™‚é–“è¡¨ç¤º

#### 3. **ãƒ”ãƒ³æŠ•ç¨¿æ©Ÿèƒ½**
- å…¬å¼ãƒ«ãƒ¼ãƒˆä¸Šã«ä½“é¨“ãƒ»ç™ºè¦‹ã‚’æŠ•ç¨¿
- 4ç¨®é¡ã®ãƒ”ãƒ³ã‚¿ã‚¤ãƒ—ï¼ˆæ™¯è‰²/åº—èˆ—/å‡ºä¼šã„/ãã®ä»–ï¼‰
- å†™çœŸæ·»ä»˜ï¼ˆæœ€å¤§5æšï¼‰
- ã„ã„ã­æ©Ÿèƒ½

#### 4. **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ GPSè¿½è·¡**
- æ•£æ­©ä¸­ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ä½ç½®è¿½è·¡
- çµŒè·¯è¨˜éŒ²ã¨çµ±è¨ˆè¡¨ç¤º
- ä¸€æ™‚åœæ­¢/å†é–‹æ©Ÿèƒ½

#### 5. **ãƒ«ãƒ¼ãƒˆæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆPhase 5-1ï¼‰**
- ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢ã«ã‚ˆã‚‹å…¬å¼ãƒ«ãƒ¼ãƒˆæ¤œç´¢
- 8ç¨®é¡ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆé›£æ˜“åº¦ã€è·é›¢ã€æ‰€è¦æ™‚é–“ã€ã‚¨ãƒªã‚¢ã€ç‰¹å¾´ã€ãƒ™ã‚¹ãƒˆã‚·ãƒ¼ã‚ºãƒ³ã€è©•ä¾¡ã€ã‚«ãƒ†ã‚´ãƒªï¼‰
- 5ã¤ã®ã‚½ãƒ¼ãƒˆé †ï¼ˆäººæ°—é †ã€è·é›¢æ˜‡é †/é™é †ã€è©•ä¾¡é †ã€æ–°ç€é †ï¼‰
- ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆ20ä»¶/ãƒšãƒ¼ã‚¸ï¼‰
- ãŠæ°—ã«å…¥ã‚Šç™»éŒ²/è§£é™¤

#### 6. **ãŠæ°—ã«å…¥ã‚Šãƒ»ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼ˆPhase 5-2ï¼‰**
- ãŠæ°—ã«å…¥ã‚Šãƒ«ãƒ¼ãƒˆä¸€è¦§
- ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ”ãƒ³ä¸€è¦§
- ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒ«ãƒ¼ãƒˆ/ãƒ”ãƒ³ï¼‰
- Pull-to-refresh

#### 7. **ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆï¼ˆPhase 5-3ï¼‰**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¬ãƒ™ãƒ«è¡¨ç¤ºï¼ˆç·è·é›¢ãƒ™ãƒ¼ã‚¹: 10kmã§1ãƒ¬ãƒ™ãƒ«ï¼‰
- ç·è·é›¢ã€ç·æ•£æ­©å›æ•°ã€è¨ªå•ã‚¨ãƒªã‚¢æ•°ã€ä½œæˆãƒ”ãƒ³æ•°
- ãƒ¬ãƒ™ãƒ«é€²æ—ãƒãƒ¼
- çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- ãƒãƒƒã‚¸çµ±è¨ˆã‚µãƒãƒªãƒ¼

#### 8. **ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½ï¼ˆPhase 5-4ï¼‰**
- ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢
- ãƒ•ã‚©ãƒ­ãƒ¼/ã‚¢ãƒ³ãƒ•ã‚©ãƒ­ãƒ¼
- ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ä¸€è¦§
- ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã®ãƒ”ãƒ³ï¼‰
- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼ˆSupabase Realtimeï¼‰
- é€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—å‰Šé™¤ã€ä¸€æ‹¬æ—¢èª­ï¼‰

#### 9. **ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ ï¼ˆPhase 5-5ï¼‰**
- 17ç¨®é¡ã®åˆæœŸãƒãƒƒã‚¸
- 5ã¤ã®ã‚«ãƒ†ã‚´ãƒªï¼ˆè·é›¢ã€ã‚¨ãƒªã‚¢ã€ãƒ”ãƒ³ã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã€ç‰¹åˆ¥ï¼‰
- 4ã¤ã®ãƒ†ã‚£ã‚¢ï¼ˆãƒ–ãƒ­ãƒ³ã‚ºã€ã‚·ãƒ«ãƒãƒ¼ã€ã‚´ãƒ¼ãƒ«ãƒ‰ã€ãƒ—ãƒ©ãƒãƒŠï¼‰
- ãƒãƒƒã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¿ãƒ–ï¼‰
- ãƒ­ãƒƒã‚¯/ã‚¢ãƒ³ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã®è¦–è¦šåŒ–
- è‡ªå‹•ãƒãƒƒã‚¸è§£é™¤ãƒã‚§ãƒƒã‚¯ï¼ˆæ•£æ­©å®Œäº†æ™‚ï¼‰
- ãƒãƒƒã‚¸ç²å¾—é€šçŸ¥

## ğŸ—ï¸ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚«ãƒ†ã‚´ãƒª | æŠ€è¡“ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ |
|---------|------|-----------|
| ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ | Flutter | 3.38.2 |
| è¨€èª | Dart | 3.0+ |
| çŠ¶æ…‹ç®¡ç† | Riverpod | 2.6.1 |
| ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ | Supabase | - |
| ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ | PostgreSQL + PostGIS | - |
| åœ°å›³ | Flutter Map | 6.1.0 |
| GPS | Geolocator | 11.0.0 |

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ§‹é€ 

#### ã‚¨ãƒªã‚¢ã¨ãƒ«ãƒ¼ãƒˆ
```
areas (ã‚¨ãƒªã‚¢ãƒã‚¹ã‚¿)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ name: TEXT (ç®±æ ¹ã€æ¨ªæµœç­‰)
  â”œâ”€â”€ description: TEXT
  â””â”€â”€ center_location: GEOGRAPHY(Point)

official_routes (å…¬å¼ãƒ«ãƒ¼ãƒˆ)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ area_id: UUID â†’ areas
  â”œâ”€â”€ name: TEXT
  â”œâ”€â”€ start_location: GEOGRAPHY(Point)
  â”œâ”€â”€ end_location: GEOGRAPHY(Point)
  â”œâ”€â”€ route_line: GEOGRAPHY(LineString)
  â”œâ”€â”€ distance_meters: FLOAT
  â”œâ”€â”€ estimated_minutes: INT
  â”œâ”€â”€ difficulty_level: TEXT (easy/moderate/hard)
  â””â”€â”€ total_pins: INT
```

#### ãƒ¦ãƒ¼ã‚¶ãƒ¼æŠ•ç¨¿
```
route_pins (ãƒ«ãƒ¼ãƒˆãƒ”ãƒ³)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ route_id: UUID â†’ official_routes
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ location: GEOGRAPHY(Point)
  â”œâ”€â”€ pin_type: TEXT (scenery/shop/encounter/other)
  â”œâ”€â”€ title: TEXT
  â”œâ”€â”€ comment: TEXT
  â””â”€â”€ likes_count: INT

route_pin_photos (ãƒ”ãƒ³å†™çœŸ)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ pin_id: UUID â†’ route_pins
  â”œâ”€â”€ photo_url: TEXT
  â””â”€â”€ sequence_number: INT

pin_likes (ã„ã„ã­)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ pin_id: UUID â†’ route_pins
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â””â”€â”€ created_at: TIMESTAMPTZ
```

#### ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨˜éŒ²
```
daily_walks (æ—¥å¸¸ã®æ•£æ­©)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ walked_at: TIMESTAMPTZ
  â”œâ”€â”€ distance_meters: FLOAT
  â”œâ”€â”€ duration_seconds: INT
  â””â”€â”€ title: TEXT

daily_walk_points (çµŒè·¯ãƒã‚¤ãƒ³ãƒˆ)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ route_id: UUID â†’ daily_walks
  â”œâ”€â”€ latitude: FLOAT
  â”œâ”€â”€ longitude: FLOAT
  â”œâ”€â”€ timestamp: TIMESTAMPTZ
  â””â”€â”€ sequence_number: INT
```

#### Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ»ãƒãƒƒã‚¸æ©Ÿèƒ½
```
route_favorites (ãƒ«ãƒ¼ãƒˆãŠæ°—ã«å…¥ã‚Š)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ route_id: UUID â†’ official_routes
  â””â”€â”€ created_at: TIMESTAMPTZ

pin_bookmarks (ãƒ”ãƒ³ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ pin_id: UUID â†’ route_pins
  â””â”€â”€ created_at: TIMESTAMPTZ

user_follows (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ•ã‚©ãƒ­ãƒ¼)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ follower_id: UUID â†’ auth.users
  â”œâ”€â”€ following_id: UUID â†’ auth.users
  â””â”€â”€ created_at: TIMESTAMPTZ

notifications (é€šçŸ¥)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ type: TEXT (new_follower/pin_liked/new_pin/badge_unlockedç­‰)
  â”œâ”€â”€ title: TEXT
  â”œâ”€â”€ body: TEXT
  â”œâ”€â”€ related_user_id: UUID â†’ auth.users (optional)
  â”œâ”€â”€ related_pin_id: UUID â†’ route_pins (optional)
  â”œâ”€â”€ is_read: BOOLEAN
  â””â”€â”€ created_at: TIMESTAMPTZ

badge_definitions (ãƒãƒƒã‚¸å®šç¾©)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ badge_code: TEXT (distance_10kmç­‰)
  â”œâ”€â”€ name_ja: TEXT
  â”œâ”€â”€ name_en: TEXT
  â”œâ”€â”€ description: TEXT
  â”œâ”€â”€ icon_name: TEXT
  â”œâ”€â”€ category: TEXT (distance/area/pins/social/special)
  â”œâ”€â”€ tier: TEXT (bronze/silver/gold/platinum)
  â””â”€â”€ sort_order: INT

user_badges (ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒãƒƒã‚¸)
  â”œâ”€â”€ id: UUID
  â”œâ”€â”€ user_id: UUID â†’ auth.users
  â”œâ”€â”€ badge_id: UUID â†’ badge_definitions
  â”œâ”€â”€ unlocked_at: TIMESTAMPTZ
  â””â”€â”€ is_new: BOOLEAN
```

## ğŸ“‚ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 

```
lib/
â”œâ”€â”€ config/                  # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â”œâ”€â”€ supabase_config.dart
â”‚   â”œâ”€â”€ wanmap_colors.dart
â”‚   â”œâ”€â”€ wanmap_typography.dart
â”‚   â””â”€â”€ wanmap_spacing.dart
â”‚
â”œâ”€â”€ models/                  # ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ walk_mode.dart       # Daily/Outing enum
â”‚   â”œâ”€â”€ area.dart
â”‚   â”œâ”€â”€ official_route.dart  # PostGISå¯¾å¿œ
â”‚   â”œâ”€â”€ route_pin.dart
â”‚   â”œâ”€â”€ route_walk.dart
â”‚   â”œâ”€â”€ user_walking_profile.dart
â”‚   â”œâ”€â”€ route_search_params.dart  # Phase 5: æ¤œç´¢ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ user_profile.dart         # Phase 5: ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”œâ”€â”€ user_statistics.dart      # Phase 5: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ
â”‚   â”œâ”€â”€ notification_model.dart   # Phase 5: é€šçŸ¥
â”‚   â”œâ”€â”€ social_model.dart         # Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«é–¢é€£
â”‚   â””â”€â”€ badge.dart                # Phase 5: ãƒãƒƒã‚¸
â”‚
â”œâ”€â”€ providers/               # RiverpodçŠ¶æ…‹ç®¡ç†
â”‚   â”œâ”€â”€ walk_mode_provider.dart
â”‚   â”œâ”€â”€ area_provider.dart
â”‚   â”œâ”€â”€ official_route_provider.dart
â”‚   â”œâ”€â”€ route_pin_provider.dart
â”‚   â”œâ”€â”€ gps_provider_riverpod.dart
â”‚   â”œâ”€â”€ route_search_provider.dart     # Phase 5: ãƒ«ãƒ¼ãƒˆæ¤œç´¢
â”‚   â”œâ”€â”€ favorites_provider.dart        # Phase 5: ãŠæ°—ã«å…¥ã‚Š
â”‚   â”œâ”€â”€ social_provider.dart           # Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«
â”‚   â”œâ”€â”€ notification_provider.dart     # Phase 5: é€šçŸ¥
â”‚   â”œâ”€â”€ badge_provider.dart            # Phase 5: ãƒãƒƒã‚¸
â”‚   â””â”€â”€ user_provider.dart             # Phase 5: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ
â”‚
â”œâ”€â”€ screens/                 # ç”»é¢
â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â””â”€â”€ home_screen.dart         # ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆãƒ¢ãƒ¼ãƒ‰åˆ‡ã‚Šæ›¿ãˆï¼‰
â”‚   â”œâ”€â”€ daily/
â”‚   â”‚   â””â”€â”€ daily_walk_view.dart     # æ—¥å¸¸ã®æ•£æ­©ç”»é¢
â”‚   â”œâ”€â”€ outing/
â”‚   â”‚   â”œâ”€â”€ outing_walk_view.dart    # ãŠã§ã‹ã‘æ•£æ­©ç”»é¢
â”‚   â”‚   â”œâ”€â”€ area_list_screen.dart    # ã‚¨ãƒªã‚¢ä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ route_list_screen.dart   # ãƒ«ãƒ¼ãƒˆä¸€è¦§
â”‚   â”‚   â”œâ”€â”€ route_detail_screen.dart # ãƒ«ãƒ¼ãƒˆè©³ç´°
â”‚   â”‚   â”œâ”€â”€ walking_screen.dart      # æ•£æ­©ä¸­ç”»é¢
â”‚   â”‚   â””â”€â”€ pin_create_screen.dart   # ãƒ”ãƒ³æŠ•ç¨¿ç”»é¢
â”‚   â”œâ”€â”€ auth/
â”‚   â”‚   â”œâ”€â”€ login_screen.dart
â”‚   â”‚   â””â”€â”€ signup_screen.dart
â”‚   â”œâ”€â”€ search/                           # Phase 5: æ¤œç´¢æ©Ÿèƒ½
â”‚   â”‚   â””â”€â”€ route_search_screen.dart
â”‚   â”œâ”€â”€ favorites/                        # Phase 5: ãŠæ°—ã«å…¥ã‚Š
â”‚   â”‚   â””â”€â”€ saved_screen.dart
â”‚   â”œâ”€â”€ profile/                          # Phase 5: ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«
â”‚   â”‚   â”œâ”€â”€ profile_screen.dart
â”‚   â”‚   â”œâ”€â”€ profile_edit_screen.dart
â”‚   â”‚   â”œâ”€â”€ user_profile_screen.dart
â”‚   â”‚   â””â”€â”€ statistics_dashboard_screen.dart
â”‚   â”œâ”€â”€ social/                           # Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«
â”‚   â”‚   â”œâ”€â”€ user_search_screen.dart
â”‚   â”‚   â””â”€â”€ notification_center_screen.dart
â”‚   â”œâ”€â”€ notifications/                    # Phase 5: é€šçŸ¥
â”‚   â”‚   â””â”€â”€ notifications_screen.dart
â”‚   â””â”€â”€ badges/                           # Phase 5: ãƒãƒƒã‚¸
â”‚       â””â”€â”€ badge_list_screen.dart
â”‚
â”œâ”€â”€ widgets/                 # å…±é€šWidget
â”‚   â”œâ”€â”€ walk_mode_switcher.dart
â”‚   â”œâ”€â”€ search/                           # Phase 5: æ¤œç´¢é–¢é€£
â”‚   â”‚   â”œâ”€â”€ route_filter_bottom_sheet.dart
â”‚   â”‚   â””â”€â”€ search_route_card.dart
â”‚   â”œâ”€â”€ favorites/                        # Phase 5: ãŠæ°—ã«å…¥ã‚Šé–¢é€£
â”‚   â”‚   â””â”€â”€ favorite_route_card.dart
â”‚   â”œâ”€â”€ notifications/                    # Phase 5: é€šçŸ¥é–¢é€£
â”‚   â”‚   â””â”€â”€ notification_item.dart
â”‚   â””â”€â”€ badges/                           # Phase 5: ãƒãƒƒã‚¸é–¢é€£
â”‚       â””â”€â”€ badge_card.dart
â”‚
â”œâ”€â”€ services/                # ã‚µãƒ¼ãƒ“ã‚¹ã‚¯ãƒ©ã‚¹
â”‚   â”œâ”€â”€ gps_service.dart
â”‚   â”œâ”€â”€ notification_service.dart
â”‚   â”œâ”€â”€ route_search_service.dart        # Phase 5: ãƒ«ãƒ¼ãƒˆæ¤œç´¢
â”‚   â”œâ”€â”€ favorites_service.dart           # Phase 5: ãŠæ°—ã«å…¥ã‚Š
â”‚   â”œâ”€â”€ social_service.dart              # Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«
â”‚   â”œâ”€â”€ badge_service.dart               # Phase 5: ãƒãƒƒã‚¸
â”‚   â””â”€â”€ local_notification_service.dart  # Phase 5: ãƒ­ãƒ¼ã‚«ãƒ«é€šçŸ¥
â”‚
â”œâ”€â”€ utils/                   # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â””â”€â”€ badge_unlock_helper.dart         # Phase 5: ãƒãƒƒã‚¸è§£é™¤ãƒ˜ãƒ«ãƒ‘ãƒ¼
â”‚
â””â”€â”€ main.dart               # ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆï¼ˆRiverpodå¯¾å¿œï¼‰
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### å‰ææ¡ä»¶

- Flutter 3.38.2ä»¥ä¸Š
- Xcode 26.1.1ï¼ˆiOSé–‹ç™ºã®å ´åˆï¼‰
- Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
- PostGISæœ‰åŠ¹åŒ–æ¸ˆã¿ã®PostgreSQLãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹

### 1. ãƒªãƒã‚¸ãƒˆãƒªã‚¯ãƒ­ãƒ¼ãƒ³

```bash
git clone https://github.com/AtsushiNarisawa/wanmap_v2.git
cd wanmap_v2
```

### 2. ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
flutter pub get
```

### 3. ç’°å¢ƒå¤‰æ•°è¨­å®š

`.env`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆ:

```env
SUPABASE_URL=your_supabase_url
SUPABASE_ANON_KEY=your_supabase_anon_key
THUNDERFOREST_API_KEY=your_thunderforest_api_key
```

### 4. Supabaseãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ

Supabaseç®¡ç†ç”»é¢ã®SQLã‚¨ãƒ‡ã‚£ã‚¿ã§ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é †æ¬¡å®Ÿè¡Œ:

```bash
supabase_migrations/001_rename_existing_tables.sql
supabase_migrations/002_create_new_tables.sql
supabase_migrations/003_create_rls_policies.sql
supabase_migrations/004_create_rpc_functions.sql
supabase_migrations/005_insert_initial_data.sql
supabase_migrations/007_phase5_search_and_social.sql  # Phase 5
supabase_migrations/008_phase5_badges_system.sql      # Phase 5
```

**Phase 5ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰:**
```bash
supabase_migrations/test_data_phase5.sql
```
âš ï¸ **æ³¨æ„**: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œã™ã‚‹å‰ã«ã€å®Ÿéš›ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼IDã«ç½®ãæ›ãˆã¦ãã ã•ã„ï¼ˆè©³ç´°ã¯ `PHASE5_TEST_GUIDE.md` ã‚’å‚ç…§ï¼‰

### 5. ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ

#### ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿
```bash
flutter run
```

#### å®Ÿæ©Ÿï¼ˆiOSï¼‰
```bash
# CocoaPodsä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
cd ios
pod install
cd ..

# ãƒ“ãƒ«ãƒ‰ã¨å®Ÿè¡Œ
flutter run --release
```

## ğŸ“Š å®Ÿè£…çŠ¶æ³

### âœ… Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆå®Œäº†ï¼‰
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆPostGISå¯¾å¿œï¼‰
- [x] RLSãƒãƒªã‚·ãƒ¼è¨­å®š
- [x] ãƒ¢ãƒ‡ãƒ«ã‚¯ãƒ©ã‚¹ä½œæˆ
- [x] Riverpod Providerä½œæˆ
- [x] 2ãƒ¢ãƒ¼ãƒ‰åˆ¶UIå®Ÿè£…
- [x] ã‚¨ãƒªã‚¢ãƒ»ãƒ«ãƒ¼ãƒˆç”»é¢å®Ÿè£…
- [x] main.dart Riverpodå¯¾å¿œ

### âœ… Phase 2: ãƒ”ãƒ³æŠ•ç¨¿æ©Ÿèƒ½ï¼ˆå®Œäº†ï¼‰
- [x] ãƒ”ãƒ³ä½œæˆç”»é¢
- [x] å†™çœŸé¸æŠæ©Ÿèƒ½ï¼ˆæœ€å¤§5æšï¼‰
- [x] æ•£æ­©ä¸­ç”»é¢ï¼ˆGPSè¿½è·¡ï¼‰
- [x] ãƒãƒƒãƒ—è¡¨ç¤ºï¼ˆå…¬å¼ãƒ«ãƒ¼ãƒˆé‡ç•³ï¼‰
- [x] çµ±è¨ˆæƒ…å ±è¡¨ç¤º
- [x] ä¸€æ™‚åœæ­¢/å†é–‹æ©Ÿèƒ½
- [x] ãƒ«ãƒ¼ãƒˆè©³ç´°ç”»é¢é€£æº

### â³ Phase 3: å®Œæˆï¼ˆTODOï¼‰
- [ ] å†™çœŸã®Storageã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Ÿè£…
- [ ] GPSçµ±è¨ˆè¨ˆç®—å®Ÿè£…ï¼ˆè·é›¢ãƒ»æ™‚é–“ï¼‰
- [ ] ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«è‡ªå‹•æ›´æ–°
- [ ] å‹•ä½œç¢ºèªã¨ãƒ†ã‚¹ãƒˆ

### âœ… Phase 4: æ•£æ­©å±¥æ­´ãƒ»ãƒ›ãƒ¼ãƒ ç”»é¢ï¼ˆå®Œäº†ï¼‰
- [x] æ•£æ­©å±¥æ­´ä¸€è¦§ç”»é¢
- [x] æ•£æ­©å±¥æ­´è©³ç´°ç”»é¢
- [x] ãƒ›ãƒ¼ãƒ ç”»é¢çµ±è¨ˆã‚«ãƒ¼ãƒ‰
- [x] RLS ãƒãƒªã‚·ãƒ¼è¨­å®š
- [x] ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«æ•´å‚™

### âœ… Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ»æ¤œç´¢ãƒ»ãƒãƒƒã‚¸ï¼ˆå®Œäº†ï¼‰
#### Phase 5-1: ãƒ«ãƒ¼ãƒˆæ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- [x] ãƒ†ã‚­ã‚¹ãƒˆæ¤œç´¢å®Ÿè£…
- [x] 8ç¨®é¡ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆé›£æ˜“åº¦ã€è·é›¢ã€æ™‚é–“ã€ã‚¨ãƒªã‚¢ã€ç‰¹å¾´ã€ã‚·ãƒ¼ã‚ºãƒ³ã€è©•ä¾¡ã€ã‚«ãƒ†ã‚´ãƒªï¼‰
- [x] 5ã¤ã®ã‚½ãƒ¼ãƒˆé †ï¼ˆäººæ°—ã€è·é›¢â†‘â†“ã€è©•ä¾¡ã€æ–°ç€ï¼‰
- [x] ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆ20ä»¶/ãƒšãƒ¼ã‚¸ã€80%ãƒˆãƒªã‚¬ãƒ¼ï¼‰
- [x] ãŠæ°—ã«å…¥ã‚Šç™»éŒ²/è§£é™¤
- [x] Pull-to-refresh
- [x] RPCé–¢æ•° `search_routes`

#### Phase 5-2: ãŠæ°—ã«å…¥ã‚Šãƒ»ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯
- [x] ãŠæ°—ã«å…¥ã‚Šãƒ«ãƒ¼ãƒˆä¸€è¦§
- [x] ãƒ–ãƒƒã‚¯ãƒãƒ¼ã‚¯ãƒ”ãƒ³ä¸€è¦§
- [x] ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆï¼ˆãƒ«ãƒ¼ãƒˆ/ãƒ”ãƒ³ï¼‰
- [x] ç„¡é™ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
- [x] Pull-to-refresh
- [x] ãƒ­ã‚°ã‚¤ãƒ³ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ
- [x] RPCé–¢æ•° `get_favorite_routes`, `get_bookmarked_pins`

#### Phase 5-3: ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆ
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼çµ±è¨ˆãƒ¢ãƒ‡ãƒ«ï¼ˆç·è·é›¢ã€ç·æ•£æ­©ã€ã‚¨ãƒªã‚¢æ•°ã€ãƒ”ãƒ³æ•°ï¼‰
- [x] ãƒ¬ãƒ™ãƒ«è¨ˆç®—ï¼ˆ10kmã”ã¨ã«1ãƒ¬ãƒ™ãƒ«ï¼‰
- [x] çµŒé¨“å€¤ãƒãƒ¼è¡¨ç¤º
- [x] çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç”»é¢
- [x] ãƒãƒƒã‚¸çµ±è¨ˆã‚µãƒãƒªãƒ¼
- [x] RPCé–¢æ•° `get_user_statistics`

#### Phase 5-4: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼æ¤œç´¢
- [x] ãƒ•ã‚©ãƒ­ãƒ¼/ã‚¢ãƒ³ãƒ•ã‚©ãƒ­ãƒ¼
- [x] ãƒ•ã‚©ãƒ­ãƒ¯ãƒ¼/ãƒ•ã‚©ãƒ­ãƒ¼ä¸­ä¸€è¦§
- [x] ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ç”»é¢
- [x] ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ï¼ˆãƒ•ã‚©ãƒ­ãƒ¼ä¸­ã®ãƒ”ãƒ³ï¼‰
- [x] ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ é€šçŸ¥ï¼ˆSupabase Realtimeï¼‰
- [x] é€šçŸ¥ã‚»ãƒ³ã‚¿ãƒ¼ï¼ˆã‚¹ãƒ¯ã‚¤ãƒ—å‰Šé™¤ã€ä¸€æ‹¬æ—¢èª­ï¼‰
- [x] é€šçŸ¥ã‚¿ã‚¤ãƒ—åˆ¥ã‚¢ã‚¤ã‚³ãƒ³ãƒ»ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
- [x] RPCé–¢æ•° `get_followers`, `get_following`, `get_following_timeline`

#### Phase 5-5: ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ 
- [x] ãƒãƒƒã‚¸å®šç¾©ãƒã‚¹ã‚¿ï¼ˆ17ç¨®é¡ã®åˆæœŸãƒãƒƒã‚¸ï¼‰
- [x] 5ã‚«ãƒ†ã‚´ãƒªï¼ˆè·é›¢ã€ã‚¨ãƒªã‚¢ã€ãƒ”ãƒ³ã€ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ã€ç‰¹åˆ¥ï¼‰
- [x] 4ãƒ†ã‚£ã‚¢ï¼ˆãƒ–ãƒ­ãƒ³ã‚ºã€ã‚·ãƒ«ãƒãƒ¼ã€ã‚´ãƒ¼ãƒ«ãƒ‰ã€ãƒ—ãƒ©ãƒãƒŠï¼‰
- [x] ãƒãƒƒã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³ç”»é¢ï¼ˆã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¿ãƒ–ï¼‰
- [x] ãƒ­ãƒƒã‚¯/ã‚¢ãƒ³ãƒ­ãƒƒã‚¯çŠ¶æ…‹ã®è¦–è¦šåŒ–
- [x] ãƒãƒƒã‚¸ã‚«ãƒ¼ãƒ‰ï¼ˆã‚¢ã‚¤ã‚³ãƒ³ã€ãƒ†ã‚£ã‚¢ã‚«ãƒ©ãƒ¼ã€èª¬æ˜ã€ç²å¾—æ—¥æ™‚ï¼‰
- [x] ãƒãƒƒã‚¸çµ±è¨ˆï¼ˆç²å¾—æ•°ã€é”æˆç‡ã€é€²æ—ãƒãƒ¼ï¼‰
- [x] è‡ªå‹•ãƒãƒƒã‚¸è§£é™¤ãƒã‚§ãƒƒã‚¯ï¼ˆRPCé–¢æ•°ï¼‰
- [x] æœ€è¿‘ç²å¾—ã—ãŸãƒãƒƒã‚¸è¡¨ç¤º
- [x] RPCé–¢æ•° `check_and_unlock_badges`, `get_user_badges`

### ğŸ“ Phase 5ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- `PHASE5_TEST_GUIDE.md`: Phase 5å…¨æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰
- `supabase_migrations/test_data_phase5.sql`: ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆ

## ğŸ” ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

### Row Level Security (RLS)

ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ã«RLSãƒãƒªã‚·ãƒ¼ãŒè¨­å®šã•ã‚Œã¦ã„ã¾ã™:

- **ãƒ—ãƒ©ã‚¤ãƒ™ãƒ¼ãƒˆè¨˜éŒ²**: ãƒ¦ãƒ¼ã‚¶ãƒ¼æœ¬äººã®ã¿ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½
- **å…¬å¼ãƒ«ãƒ¼ãƒˆãƒ»ã‚¨ãƒªã‚¢**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–²è¦§å¯èƒ½
- **ãƒ”ãƒ³æŠ•ç¨¿**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼é–²è¦§å¯èƒ½ã€ç·¨é›†ã¯æŠ•ç¨¿è€…ã®ã¿
- **ã„ã„ã­**: å…¨ãƒ¦ãƒ¼ã‚¶ãƒ¼å®Ÿè¡Œå¯èƒ½ã€å‰Šé™¤ã¯æœ¬äººã®ã¿

## ğŸ“± å¯¾å¿œãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ 

- âœ… iOS 12.0ä»¥ä¸Š
- â³ Androidï¼ˆå®Ÿè£…äºˆå®šï¼‰

## ğŸ¤ è²¢çŒ®

ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’æ­“è¿ã—ã¾ã™ï¼ä»¥ä¸‹ã®æ‰‹é †ã§ã”å”åŠ›ãã ã•ã„:

1. ãƒ•ã‚©ãƒ¼ã‚¯
2. ãƒ•ã‚£ãƒ¼ãƒãƒ£ãƒ¼ãƒ–ãƒ©ãƒ³ãƒä½œæˆ (`git checkout -b feature/amazing-feature`)
3. ã‚³ãƒŸãƒƒãƒˆ (`git commit -m 'Add amazing feature'`)
4. ãƒ—ãƒƒã‚·ãƒ¥ (`git push origin feature/amazing-feature`)
5. ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆä½œæˆ

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

ã“ã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã¯å€‹äººé–‹ç™ºç”¨ã§ã™ã€‚

## ğŸ‘¨â€ğŸ’» é–‹ç™ºè€…

**æˆæ²¢æ•¦å²** (Atsushi Narisawa)
- ãƒãƒ¼ã‚±ãƒ†ã‚£ãƒ³ã‚°ã‚¹ãƒšã‚·ãƒ£ãƒªã‚¹ãƒˆå…¼ãƒšãƒƒãƒˆäº‹æ¥­èµ·æ¥­å®¶
- DogHubï¼ˆç¥å¥ˆå·çœŒè¶³æŸ„ä¸‹éƒ¡ç®±æ ¹ç”ºï¼‰é‹å–¶

## ğŸ“ é€£çµ¡å…ˆ

å•ã„åˆã‚ã›ã¯ GitHub Issues ã§ãŠé¡˜ã„ã—ã¾ã™ã€‚

---

**Last Updated**: 2025-11-22 (Phase 5å®Œäº†)
**Version**: 1.5.0 (Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ»æ¤œç´¢ãƒ»ãƒãƒƒã‚¸)  
**Git Commits**: 
- Phase 1: 7955650
- Phase 2: 6f50800
- Phase 4: æ•£æ­©å±¥æ­´ãƒ»ãƒ›ãƒ¼ãƒ ç”»é¢
- Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«ãƒ»æ¤œç´¢ãƒ»ãƒãƒƒã‚¸æ©Ÿèƒ½

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- [Phase 5 ãƒ†ã‚¹ãƒˆã‚¬ã‚¤ãƒ‰](PHASE5_TEST_GUIDE.md) - Phase 5å…¨æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆæ‰‹é †æ›¸
- [ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¬ã‚¤ãƒ‰](supabase_migrations/) - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³SQL
