# WanMap v2 å®Ÿéš›ã®å®Ÿè£…çŠ¶æ³ï¼ˆæ­£ç¢ºç‰ˆï¼‰

**ç¢ºèªæ—¥æ™‚**: 2025-01-16  
**æ–¹æ³•**: ãƒ•ã‚¡ã‚¤ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®å®Ÿéš›ã®ãƒ•ã‚¡ã‚¤ãƒ«å­˜åœ¨ã‚’ç¢ºèª

---

## ğŸ¯ é‡è¦ãªç™ºè¦‹

éå»ã®å±¥æ­´ã‚’ç¢ºèªã—ãŸçµæœã€**ã»ã¨ã‚“ã©ã®æ©Ÿèƒ½ãŒæ—¢ã«å®Ÿè£…æ¸ˆã¿**ã§ã—ãŸï¼

ä»¥å‰ã®ãƒã‚§ãƒƒã‚¯ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯ã€ç‰¹å®šã®ãƒ•ã‚¡ã‚¤ãƒ«åã®ã¿ã‚’æ¢ã—ã¦ã„ãŸãŸã‚ã€å®Ÿéš›ã«ã¯å­˜åœ¨ã™ã‚‹æ©Ÿèƒ½ã‚’ã€Œä¸è¶³ã€ã¨èª¤èªè­˜ã—ã¦ã„ã¾ã—ãŸã€‚

---

## âœ… å®Ÿè£…æ¸ˆã¿ç”»é¢ã®å®Œå…¨ãƒªã‚¹ãƒˆï¼ˆ45ç”»é¢ï¼‰

### èªè¨¼ç³»ï¼ˆ3ç”»é¢ï¼‰
- âœ… `lib/screens/auth/login_screen.dart`
- âœ… `lib/screens/auth/signup_screen.dart`
- âœ… `lib/screens/auth/password_reset_screen.dart`

### Phase 1: åŸºæœ¬æ©Ÿèƒ½ï¼ˆ10ç”»é¢ï¼‰
- âœ… `lib/screens/home/home_screen.dart`
- âœ… `lib/screens/daily/daily_walk_view.dart`
- âœ… `lib/screens/daily/daily_walking_screen.dart`
- âœ… `lib/screens/map/map_screen.dart`
- âœ… `lib/screens/map/record_screen.dart`
- âœ… `lib/screens/profile/profile_screen.dart`
- âœ… `lib/screens/profile/profile_edit_screen.dart`
- âœ… `lib/screens/spots/spot_registration_screen.dart` âš ï¸ (ãƒ”ãƒ³ä½œæˆç”»é¢)
- âœ… `lib/screens/spots/spot_detail_screen.dart`
- âœ… `lib/screens/settings/settings_screen.dart`

### Phase 2: ã‚¨ãƒªã‚¢ãƒ»å…¬å¼ãƒ«ãƒ¼ãƒˆï¼ˆ6ç”»é¢ï¼‰
- âœ… `lib/screens/outing/area_list_screen.dart`
- âœ… `lib/screens/outing/route_list_screen.dart`
- âœ… `lib/screens/outing/route_detail_screen.dart`
- âœ… `lib/screens/outing/outing_walk_view.dart`
- âœ… `lib/screens/outing/outing_walk_view_v2.dart`
- âœ… `lib/screens/routes/public_routes_screen.dart`

### Phase 3: æ¤œç´¢æ©Ÿèƒ½ï¼ˆ2ç”»é¢ï¼‰
- âœ… `lib/screens/search/route_search_screen.dart` âš ï¸ (æ¤œç´¢ç”»é¢)
- âœ… `lib/screens/routes/route_search_screen.dart` âš ï¸ (é‡è¤‡ï¼Ÿ)

### Phase 4: å±¥æ­´æ©Ÿèƒ½ï¼ˆ2ç”»é¢ï¼‰
- âœ… `lib/screens/history/walk_history_screen.dart` âš ï¸ (å±¥æ­´ç”»é¢)
- âœ… `lib/screens/history/walk_detail_screen.dart` âš ï¸ (è©³ç´°ç”»é¢)

### Phase 5: ã‚½ãƒ¼ã‚·ãƒ£ãƒ«æ©Ÿèƒ½ï¼ˆ10ç”»é¢ï¼‰
- âœ… `lib/screens/social/timeline_screen.dart`
- âœ… `lib/screens/social/follow_list_screen.dart`
- âœ… `lib/screens/social/followers_screen.dart`
- âœ… `lib/screens/social/following_screen.dart`
- âœ… `lib/screens/social/user_search_screen.dart`
- âœ… `lib/screens/social/popular_routes_screen.dart`
- âœ… `lib/screens/social/notification_center_screen.dart`
- âœ… `lib/screens/notifications/notifications_screen.dart` âš ï¸ (é‡è¤‡?)
- âœ… `lib/screens/profile/user_profile_screen.dart`
- âœ… `lib/screens/routes/favorites_screen.dart`

### Phase 5: ãƒãƒƒã‚¸ãƒ»çµ±è¨ˆï¼ˆ3ç”»é¢ï¼‰
- âœ… `lib/screens/badges/badge_list_screen.dart`
- âœ… `lib/screens/profile/statistics_dashboard_screen.dart`
- âœ… `lib/screens/statistics/statistics_dashboard_screen.dart` âš ï¸ (é‡è¤‡ï¼Ÿ)

### Phase 5: ãŠæ°—ã«å…¥ã‚Šãƒ»ä¿å­˜ï¼ˆ1ç”»é¢ï¼‰
- âœ… `lib/screens/favorites/saved_screen.dart`

### ãƒ«ãƒ¼ãƒˆç®¡ç†ï¼ˆ3ç”»é¢ï¼‰
- âœ… `lib/screens/routes/routes_list_screen.dart`
- âœ… `lib/screens/routes/route_detail_screen.dart`
- âœ… `lib/screens/routes/route_edit_screen.dart`

### ãŠå‡ºã‹ã‘ï¼ˆ2ç”»é¢ï¼‰
- âœ… `lib/screens/outing/pin_create_screen.dart`
- âœ… `lib/screens/outing/walking_screen.dart`

### çŠ¬ã®ç®¡ç†ï¼ˆ2ç”»é¢ï¼‰
- âœ… `lib/screens/dogs/dog_list_screen.dart`
- âœ… `lib/screens/dogs/dog_registration_screen.dart`

### æ³•çš„æƒ…å ±ï¼ˆ2ç”»é¢ï¼‰
- âœ… `lib/screens/legal/privacy_policy_screen.dart`
- âœ… `lib/screens/legal/terms_of_service_screen.dart`

---

## âš ï¸ ç™ºè¦‹ã•ã‚ŒãŸå•é¡Œç‚¹

### 1. ãƒ•ã‚¡ã‚¤ãƒ«ã®é‡è¤‡
ä»¥ä¸‹ã®æ©Ÿèƒ½ã§è¤‡æ•°ã®é¡ä¼¼ç”»é¢ãŒå­˜åœ¨ï¼ˆã©ã¡ã‚‰ãŒæœ€æ–°ç‰ˆã‹ä¸æ˜ï¼‰ï¼š

#### çµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
- `lib/screens/profile/statistics_dashboard_screen.dart`
- `lib/screens/statistics/statistics_dashboard_screen.dart`

#### é€šçŸ¥ç”»é¢
- `lib/screens/notifications/notifications_screen.dart`
- `lib/screens/social/notification_center_screen.dart`

#### ãƒ«ãƒ¼ãƒˆæ¤œç´¢
- `lib/screens/search/route_search_screen.dart`
- `lib/screens/routes/route_search_screen.dart`

### 2. ãŠå‡ºã‹ã‘æ•£æ­©ç”»é¢ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³
- `outing_walk_view.dart`
- `outing_walk_view_v2.dart`
ä¸¡æ–¹å­˜åœ¨ - v2ãŒæœ€æ–°ç‰ˆï¼Ÿ

---

## ğŸ” ç¢ºèªãŒå¿…è¦ãªé …ç›®

### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã®æ•´åˆæ€§

#### Phase 4: å±¥æ­´æ©Ÿèƒ½
- **ç”»é¢**: `walk_history_screen.dart`, `walk_detail_screen.dart` âœ… å­˜åœ¨
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: `trips`, `trip_routes` ãƒ†ãƒ¼ãƒ–ãƒ« âœ… å­˜åœ¨
- **å•é¡Œ**: ç”»é¢åãŒ `walk_*` ã ãŒã€ãƒ†ãƒ¼ãƒ–ãƒ«åã¯ `trip_*`
  - ã“ã‚Œã¯ **daily_walks** (æ—¥ã€…ã®æ•£æ­©) ã¨ **trips** (æ—…è¡Œè¨ˆç”») ã®2ã¤ã®æ¦‚å¿µãŒæ··åœ¨ã—ã¦ã„ã‚‹å¯èƒ½æ€§

#### Phase 1: ãƒ”ãƒ³æ©Ÿèƒ½
- **ç”»é¢**: `spot_registration_screen.dart`, `spot_detail_screen.dart` âœ… å­˜åœ¨
- **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**: `pins` ã¾ãŸã¯ `route_pins` ãƒ†ãƒ¼ãƒ–ãƒ« â“
- **ç¢ºèª**: ãƒ†ãƒ¼ãƒ–ãƒ«åã®çµ±ä¸€ãŒå¿…è¦

---

## ğŸ¯ å®Ÿéš›ã«ä¸è¶³ã—ã¦ã„ã‚‹æ©Ÿèƒ½ï¼ˆå†è©•ä¾¡ï¼‰

### 1. badge_detail_screen.dartï¼ˆãƒãƒƒã‚¸è©³ç´°ç”»é¢ï¼‰
- ç¾çŠ¶: badge_list_screen ã®ã¿
- å¿…è¦æ€§: ä½ï¼ˆä¸€è¦§ç”»é¢ã§ååˆ†ãªå¯èƒ½æ€§ï¼‰

### 2. tripé–¢é€£ã®ç”»é¢ï¼ˆPhase 4ã®æ—…è¡Œè¨ˆç”»æ©Ÿèƒ½ï¼‰
ç¾åœ¨ã¯ `walk_history` (æ—¥ã€…ã®æ•£æ­©å±¥æ­´) ã®ã¿ã§ã€`trips` (æ—…è¡Œè¨ˆç”») ã®å°‚ç”¨ç”»é¢ãŒãªã„å¯èƒ½æ€§ï¼š
- `trip_list_screen.dart` - æ—…è¡Œè¨ˆç”»ä¸€è¦§
- `trip_create_screen.dart` - æ—…è¡Œè¨ˆç”»ä½œæˆ
- `trip_detail_screen.dart` - æ—…è¡Œè¨ˆç”»è©³ç´°
- `trip_edit_screen.dart` - æ—…è¡Œè¨ˆç”»ç·¨é›†

### 3. area_detail_screen.dartï¼ˆã‚¨ãƒªã‚¢è©³ç´°ç”»é¢ï¼‰
- ç¾çŠ¶: area_list_screen ã®ã¿
- å¿…è¦æ€§: ä¸­ï¼ˆã‚¨ãƒªã‚¢ã”ã¨ã®çµ±è¨ˆãƒ»å…¬å¼ãƒ«ãƒ¼ãƒˆã‚’è¡¨ç¤ºï¼‰

### 4. official_route_detail_screen.dartï¼ˆå…¬å¼ãƒ«ãƒ¼ãƒˆè©³ç´°ï¼‰
- ç¾çŠ¶: route_detail_screen ã§ä»£ç”¨å¯èƒ½ï¼Ÿ
- å¿…è¦æ€§: ä½

---

## ğŸ“‹ å„ªå…ˆçš„ã«ç¢ºèªã™ã¹ãã“ã¨

### æœ€å„ªå…ˆ: ãƒãƒƒã‚¸ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª
1. **badgesãƒ†ãƒ¼ãƒ–ãƒ«/ãƒ“ãƒ¥ãƒ¼ã®ä½œæˆ**
   - `/home/user/webapp/wanmap_v2/FIX_BADGES_TABLE_ALIAS.sql` ã‚’å®Ÿè¡Œ
   - badge_definitions â†’ badges ãƒ“ãƒ¥ãƒ¼ã®ãƒãƒƒãƒ”ãƒ³ã‚°
   - 17å€‹ã®ãƒãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿æŠ•å…¥

2. **badge_list_screen.dart ã®å‹•ä½œç¢ºèª**
   - æ—¢ã«å®Ÿè£…æ¸ˆã¿
   - ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ä¿®æ­£å¾Œã«å‹•ä½œã™ã‚‹ã¯ãš

3. **statistics_dashboard_screen.dart ã®å‹•ä½œç¢ºèª**
   - 2ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ - ã©ã¡ã‚‰ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### é«˜å„ªå…ˆ: å±¥æ­´æ©Ÿèƒ½ã®ç¢ºèª
1. **walk_history_screen vs tripsæ©Ÿèƒ½ã®é–¢ä¿‚**
   - `walk_history_screen.dart` ãŒ daily_walks ã‚’è¡¨ç¤ºã—ã¦ã„ã‚‹ã‹ç¢ºèª
   - `trips` ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹ç”»é¢ãŒä¸è¶³ã—ã¦ã„ãªã„ã‹ç¢ºèª

2. **tripé–¢é€£ç”»é¢ã®å¿…è¦æ€§**
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ—…è¡Œè¨ˆç”»æ©Ÿèƒ½ã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹ç”»é¢ãŒå¿…è¦ã‹åˆ¤æ–­

### ä¸­å„ªå…ˆ: é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†
1. ã©ã¡ã‚‰ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå®Ÿéš›ã«ä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. å¤ã„ãƒ•ã‚¡ã‚¤ãƒ«ã‚’å‰Šé™¤ã¾ãŸã¯ãƒªãƒãƒ¼ãƒ 

---

## ğŸš€ æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

### ã‚¹ãƒ†ãƒƒãƒ—1: ãƒãƒƒã‚¸ãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¿®æ­£ï¼ˆå³å®Ÿè¡Œï¼‰
```bash
Supabase SQL Editor ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œ:
/home/user/webapp/wanmap_v2/FIX_BADGES_TABLE_ALIAS.sql
```

### ã‚¹ãƒ†ãƒƒãƒ—2: å®Ÿè£…çŠ¶æ³ã®è©³ç´°ç¢ºèª
ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã‚“ã§ã€å®Ÿéš›ã®å®Ÿè£…å†…å®¹ã‚’ç¢ºèªï¼š
1. `lib/screens/history/walk_history_screen.dart` - daily_walks ã‚’ä½¿ç”¨ï¼Ÿ
2. `lib/screens/badges/badge_list_screen.dart` - å‹•ä½œç¢ºèª
3. `lib/screens/profile/statistics_dashboard_screen.dart` vs `lib/screens/statistics/statistics_dashboard_screen.dart`
4. é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®å†…å®¹æ¯”è¼ƒ

### ã‚¹ãƒ†ãƒƒãƒ—3: ä¸è¶³æ©Ÿèƒ½ã®å®Ÿè£…ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
1. tripé–¢é€£ç”»é¢ï¼ˆæ—…è¡Œè¨ˆç”»æ©Ÿèƒ½ï¼‰
2. area_detail_screenï¼ˆå¿…è¦æ€§ã‚’ç¢ºèªå¾Œï¼‰
3. badge_detail_screenï¼ˆå¿…è¦æ€§ã‚’ç¢ºèªå¾Œï¼‰

---

## ğŸ“Š çµè«–

**ä»¥å‰ã®è¨ºæ–­ã¯èª¤ã‚Šã§ã—ãŸã€‚å®Ÿéš›ã«ã¯ï¼š**

- âŒ Phase 3 æ¤œç´¢æ©Ÿèƒ½ãŒæœªå®Ÿè£… â†’ âœ… **å®Ÿè£…æ¸ˆã¿** (`route_search_screen.dart` Ã— 2)
- âŒ Phase 4 å±¥æ­´æ©Ÿèƒ½ãŒæœªå®Ÿè£… â†’ âœ… **éƒ¨åˆ†å®Ÿè£…æ¸ˆã¿** (`walk_history_screen.dart`)
- âŒ Phase 2 ã‚¨ãƒªã‚¢è©³ç´°ãŒæœªå®Ÿè£… â†’ âš ï¸ **area_detail ã¯ä¸è¶³ã ãŒã€ãƒªã‚¹ãƒˆãƒ»ãƒ«ãƒ¼ãƒˆè©³ç´°ã¯å®Ÿè£…æ¸ˆã¿**

**çœŸã®å•é¡Œç‚¹ï¼š**
1. ğŸš¨ **badgesãƒ†ãƒ¼ãƒ–ãƒ«ã®ä¸è¶³** ï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹å´ã®å•é¡Œï¼‰
2. âš ï¸ **é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®å­˜åœ¨** ï¼ˆã©ã‚ŒãŒæœ€æ–°ç‰ˆã‹ä¸æ˜ï¼‰
3. âš ï¸ **tripsæ©Ÿèƒ½ã®å°‚ç”¨ç”»é¢ãŒä¸è¶³** ï¼ˆæ—…è¡Œè¨ˆç”» vs æ—¥ã€…ã®æ•£æ­©ï¼‰

**æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ï¼š**
1. ãƒãƒƒã‚¸ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä¿®æ­£ï¼ˆSQLå®Ÿè¡Œï¼‰
2. æ—¢å­˜ç”»é¢ã®å‹•ä½œç¢ºèª
3. é‡è¤‡ãƒ•ã‚¡ã‚¤ãƒ«ã®æ•´ç†
4. æœ¬å½“ã«ä¸è¶³ã—ã¦ã„ã‚‹æ©Ÿèƒ½ã®ã¿ã‚’å®Ÿè£…
